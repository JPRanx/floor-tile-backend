{"openapi":"3.1.0","info":{"title":"Floor Tile SaaS","description":"Inventory, logistics, and order optimization for floor tile distribution","version":"0.1.0"},"paths":{"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.\n\nReturns:\n    Basic health status and database connection state","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint.\n\nReturns:\n    API information and available endpoints","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/products":{"get":{"tags":["Products"],"summary":"List Products","description":"List all products with optional filters.\n\nReturns paginated list of products.","operationId":"list_products_api_products_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/Category"},{"type":"null"}],"description":"Filter by category","title":"Category"},"description":"Filter by category"},{"name":"rotation","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/Rotation"},{"type":"null"}],"description":"Filter by rotation","title":"Rotation"},"description":"Filter by rotation"},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive products","default":false,"title":"Include Inactive"},"description":"Include inactive products"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Products"],"summary":"Create Product","description":"Create a new product.\n\nRaises:\n    409: SKU already exists\n    422: Validation error","operationId":"create_product_api_products_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/{product_id}":{"get":{"tags":["Products"],"summary":"Get Product","description":"Get a single product by ID.\n\nRaises:\n    404: Product not found","operationId":"get_product_api_products__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Products"],"summary":"Update Product","description":"Update an existing product.\n\nOnly provided fields are updated.\n\nRaises:\n    404: Product not found\n    409: New SKU already exists\n    422: Validation error","operationId":"update_product_api_products__product_id__patch","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Products"],"summary":"Delete Product","description":"Delete a product (soft delete).\n\nSets active=False rather than removing from database.\n\nRaises:\n    404: Product not found","operationId":"delete_product_api_products__product_id__delete","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/sku/{sku}":{"get":{"tags":["Products"],"summary":"Get Product By Sku","description":"Get a product by SKU.\n\nRaises:\n    404: Product not found","operationId":"get_product_by_sku_api_products_sku__sku__get","parameters":[{"name":"sku","in":"path","required":true,"schema":{"type":"string","title":"Sku"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/count/total":{"get":{"tags":["Products"],"summary":"Count Products","description":"Get total product count.","operationId":"count_products_api_products_count_total_get","parameters":[{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive","default":false,"title":"Include Inactive"},"description":"Include inactive"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inventory/latest":{"get":{"tags":["Inventory"],"summary":"Get Latest Inventory","description":"Get the most recent inventory snapshot for each product.\n\nReturns list of snapshots (alias for /current).","operationId":"get_latest_inventory_api_inventory_latest_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/InventorySnapshotResponse"},"type":"array","title":"Response Get Latest Inventory Api Inventory Latest Get"}}}}}}},"/api/inventory/current":{"get":{"tags":["Inventory"],"summary":"Get Current Inventory","description":"Get the most recent inventory snapshot for each product.\n\nUsed for dashboard display.","operationId":"get_current_inventory_api_inventory_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryCurrentResponse"}}}}}}},"/api/inventory/upload":{"post":{"tags":["Inventory"],"summary":"Upload Inventory","description":"Upload inventory data from Excel file.\n\nParses the INVENTARIO sheet from the owner template.\nAuto-creates products from the sheet if they don't exist.\nRejects entire upload if any row has errors.\n\nRaises:\n    422: Validation error (missing columns, invalid data, etc.)","operationId":"upload_inventory_api_inventory_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_inventory_api_inventory_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inventory/history/{product_id}":{"get":{"tags":["Inventory"],"summary":"Get Inventory History","description":"Get inventory history for a specific product.\n\nReturns snapshots ordered by date descending.","operationId":"get_inventory_history_api_inventory_history__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Max records to return","default":30,"title":"Limit"},"description":"Max records to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/InventorySnapshotResponse"},"title":"Response Get Inventory History Api Inventory History  Product Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inventory":{"get":{"tags":["Inventory"],"summary":"List Inventory","description":"List all inventory snapshots with optional filters.\n\nReturns paginated list ordered by date descending.","operationId":"list_inventory_api_inventory_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"product_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by product","title":"Product Id"},"description":"Filter by product"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventoryListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Inventory"],"summary":"Create Inventory Snapshot","description":"Create a new inventory snapshot.\n\nRaises:\n    422: Validation error","operationId":"create_inventory_snapshot_api_inventory_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventorySnapshotCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventorySnapshotResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inventory/{snapshot_id}":{"get":{"tags":["Inventory"],"summary":"Get Inventory Snapshot","description":"Get a single inventory snapshot by ID.\n\nRaises:\n    404: Snapshot not found","operationId":"get_inventory_snapshot_api_inventory__snapshot_id__get","parameters":[{"name":"snapshot_id","in":"path","required":true,"schema":{"type":"string","title":"Snapshot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventorySnapshotResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Inventory"],"summary":"Update Inventory Snapshot","description":"Update an existing inventory snapshot.\n\nOnly provided fields are updated.\n\nRaises:\n    404: Snapshot not found\n    422: Validation error","operationId":"update_inventory_snapshot_api_inventory__snapshot_id__patch","parameters":[{"name":"snapshot_id","in":"path","required":true,"schema":{"type":"string","title":"Snapshot Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventorySnapshotUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InventorySnapshotResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Inventory"],"summary":"Delete Inventory Snapshot","description":"Delete an inventory snapshot.\n\nRaises:\n    404: Snapshot not found","operationId":"delete_inventory_snapshot_api_inventory__snapshot_id__delete","parameters":[{"name":"snapshot_id","in":"path","required":true,"schema":{"type":"string","title":"Snapshot Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/inventory/count/total":{"get":{"tags":["Inventory"],"summary":"Count Inventory Snapshots","description":"Get total inventory snapshot count.","operationId":"count_inventory_snapshots_api_inventory_count_total_get","parameters":[{"name":"product_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by product","title":"Product Id"},"description":"Filter by product"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sales/upload":{"post":{"tags":["Sales"],"summary":"Upload Sales","description":"Upload sales data from Excel file.\n\nParses VENTAS sheet and creates sales records.\nRejects entire upload if any SKU is invalid.\n\nReturns:\n    SalesUploadResponse with created records","operationId":"upload_sales_api_sales_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_sales_api_sales_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sales/history/{product_id}":{"get":{"tags":["Sales"],"summary":"Get Sales History","description":"Get sales history for a product.\n\nDefault returns last 52 weeks (1 year).","operationId":"get_sales_history_api_sales_history__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":260,"minimum":1,"description":"Weeks to return","default":52,"title":"Limit"},"description":"Weeks to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sales/weekly/{week_start}":{"get":{"tags":["Sales"],"summary":"Get Weekly Sales","description":"Get all sales for a specific week.","operationId":"get_weekly_sales_api_sales_weekly__week_start__get","parameters":[{"name":"week_start","in":"path","required":true,"schema":{"type":"string","format":"date","title":"Week Start"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sales":{"get":{"tags":["Sales"],"summary":"List Sales","description":"List all sales records with optional filters.\n\nReturns paginated list of sales records.","operationId":"list_sales_api_sales_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"product_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by product","title":"Product Id"},"description":"Filter by product"},{"name":"week_start","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Filter by week","title":"Week Start"},"description":"Filter by week"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Sales"],"summary":"Create Sales Record","description":"Create a new sales record.\n\nRaises:\n    422: Validation error","operationId":"create_sales_record_api_sales_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesRecordCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesRecordResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sales/{record_id}":{"get":{"tags":["Sales"],"summary":"Get Sales Record","description":"Get a single sales record by ID.\n\nRaises:\n    404: Record not found","operationId":"get_sales_record_api_sales__record_id__get","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"string","title":"Record Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesRecordResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Sales"],"summary":"Update Sales Record","description":"Update an existing sales record.\n\nRaises:\n    404: Record not found\n    422: Validation error","operationId":"update_sales_record_api_sales__record_id__patch","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"string","title":"Record Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesRecordUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalesRecordResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Sales"],"summary":"Delete Sales Record","description":"Delete a sales record.\n\nRaises:\n    404: Record not found","operationId":"delete_sales_record_api_sales__record_id__delete","parameters":[{"name":"record_id","in":"path","required":true,"schema":{"type":"string","title":"Record Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sales/count/total":{"get":{"tags":["Sales"],"summary":"Count Sales","description":"Get total sales record count.","operationId":"count_sales_api_sales_count_total_get","parameters":[{"name":"product_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by product","title":"Product Id"},"description":"Filter by product"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/stockout":{"get":{"tags":["Dashboard"],"summary":"Get Stockout Status","description":"Get stockout status for all products.\n\nReturns complete stockout analysis including:\n- Status counts (critical, warning, ok, no_sales)\n- Individual product calculations\n- Lead time and threshold info","operationId":"get_stockout_status_api_dashboard_stockout_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockoutSummary"}}}}}}},"/api/dashboard/stockout/critical":{"get":{"tags":["Dashboard"],"summary":"Get Critical Products","description":"Get products with CRITICAL stockout status.\n\nThese products have less than 45 days of stock remaining\nand need immediate attention.","operationId":"get_critical_products_api_dashboard_stockout_critical_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ProductStockout"},"type":"array","title":"Response Get Critical Products Api Dashboard Stockout Critical Get"}}}}}}},"/api/dashboard/stockout/warning":{"get":{"tags":["Dashboard"],"summary":"Get Warning Products","description":"Get products with WARNING stockout status.\n\nThese products have 45-59 days of stock remaining\nand should be ordered soon.","operationId":"get_warning_products_api_dashboard_stockout_warning_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ProductStockout"},"type":"array","title":"Response Get Warning Products Api Dashboard Stockout Warning Get"}}}}}}},"/api/dashboard/stockout/by-status":{"get":{"tags":["Dashboard"],"summary":"Get Products By Status","description":"Get products filtered by stockout status.\n\nStatus options: CRITICAL, WARNING, OK, NO_SALES","operationId":"get_products_by_status_api_dashboard_stockout_by_status_get","parameters":[{"name":"status","in":"query","required":true,"schema":{"$ref":"#/components/schemas/StockoutStatus","description":"Filter by status"},"description":"Filter by status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductStockout"},"title":"Response Get Products By Status Api Dashboard Stockout By Status Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/stockout/{product_id}":{"get":{"tags":["Dashboard"],"summary":"Get Product Stockout","description":"Get stockout status for a single product.\n\nArgs:\n    product_id: Product UUID","operationId":"get_product_stockout_api_dashboard_stockout__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductStockout"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dashboard/summary":{"get":{"tags":["Dashboard"],"summary":"Get Dashboard Summary","description":"Get high-level dashboard summary.\n\nReturns quick counts without full product details.\nUseful for dashboard widgets.","operationId":"get_dashboard_summary_api_dashboard_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/settings":{"get":{"tags":["Settings"],"summary":"List Settings","description":"List all settings with optional category filter.\n\nReturns all settings ordered by key.","operationId":"list_settings_api_settings_get","parameters":[{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category","title":"Category"},"description":"Filter by category"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/settings/{key}":{"get":{"tags":["Settings"],"summary":"Get Setting","description":"Get setting by key.\n\nReturns single setting.","operationId":"get_setting_api_settings__key__get","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Settings"],"summary":"Update Setting","description":"Update setting value.\n\nOnly the value can be updated - key is immutable.","operationId":"update_setting_api_settings__key__patch","parameters":[{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/recommendations/orders":{"get":{"tags":["Recommendations"],"summary":"Get Order Recommendations","description":"Get order recommendations for all products.\n\nCalculates target warehouse allocation per product based on\nsales velocity and safety stock, then compares against current\ninventory to recommend what to order.\n\nReturns recommendations sorted by priority (CRITICAL > HIGH > MEDIUM > LOW),\nthen by days until stockout.","operationId":"get_order_recommendations_api_recommendations_orders_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderRecommendations"}}}}}}},"/api/recommendations/allocations":{"get":{"tags":["Recommendations"],"summary":"Get Warehouse Allocations","description":"Get detailed warehouse allocation breakdown.\n\nShows target allocation per product based on:\n- Sales velocity (daily/weekly average)\n- Variability (standard deviation of weekly sales)\n- Safety stock calculation (Z-score × std_dev × √lead_time)\n\nIf total allocation exceeds warehouse capacity (740 pallets),\nallocations are scaled down proportionally.","operationId":"get_warehouse_allocations_api_recommendations_allocations_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ProductAllocation"},"type":"array","title":"Response Get Warehouse Allocations Api Recommendations Allocations Get"}}}}}}},"/api/recommendations/summary":{"get":{"tags":["Recommendations"],"summary":"Get Recommendations Summary","description":"Get high-level summary of recommendations.\n\nReturns just the counts and totals without full product details.\nUseful for dashboard widgets.","operationId":"get_recommendations_summary_api_recommendations_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/boats":{"get":{"tags":["Boats"],"summary":"Get Boat Schedules","description":"List boat schedules with optional filters.\n\nQuery parameters:\n- status: Filter by status (available, booked, departed, arrived)\n- from_date: Only departures after this date\n- to_date: Only departures before this date","operationId":"get_boat_schedules_api_boats_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Departures after this date","title":"From Date"},"description":"Departures after this date"},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Departures before this date","title":"To Date"},"description":"Departures before this date"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Boats"],"summary":"Create Boat Schedule","description":"Create a new boat schedule manually.\n\nPrefer using /upload for bulk import from TIBA Excel.","operationId":"create_boat_schedule_api_boats_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/boats/available":{"get":{"tags":["Boats"],"summary":"Get Available Boats","description":"Get available boat schedules for booking.\n\nReturns schedules with status='available' ordered by departure date.","operationId":"get_available_boats_api_boats_available_get","parameters":[{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Departures after this date","title":"From Date"},"description":"Departures after this date"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Maximum results","default":10,"title":"Limit"},"description":"Maximum results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BoatScheduleResponse"},"title":"Response Get Available Boats Api Boats Available Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/boats/next":{"get":{"tags":["Boats"],"summary":"Get Next Boat","description":"Get the next available boat schedule.\n\nUsed for dashboard widget \"Next boat departing...\"","operationId":"get_next_boat_api_boats_next_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/BoatScheduleResponse"},{"type":"null"}],"title":"Response Get Next Boat Api Boats Next Get"}}}}}}},"/api/boats/{schedule_id}":{"get":{"tags":["Boats"],"summary":"Get Boat Schedule","description":"Get a single boat schedule by ID.","operationId":"get_boat_schedule_api_boats__schedule_id__get","parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Boats"],"summary":"Update Boat Schedule","description":"Update a boat schedule.\n\nOnly provided fields are updated.","operationId":"update_boat_schedule_api_boats__schedule_id__patch","parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Boats"],"summary":"Delete Boat Schedule","description":"Delete a boat schedule.\n\nUse with caution - prefer updating status instead.","operationId":"delete_boat_schedule_api_boats__schedule_id__delete","parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/boats/upload":{"post":{"tags":["Boats"],"summary":"Upload Boat Schedules","description":"Import boat schedules from TIBA Excel file.\n\nParses the TABLA DE BOOKING sheet.\nPerforms upsert: updates existing schedules, inserts new ones.\n\nReturns:\n    imported: Number of new schedules added\n    updated: Number of existing schedules updated\n    skipped: Number of unchanged schedules\n    errors: List of error messages","operationId":"upload_boat_schedules_api_boats_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_boat_schedules_api_boats_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatUploadResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/boats/{schedule_id}/status":{"patch":{"tags":["Boats"],"summary":"Update Boat Status","description":"Update only the status of a boat schedule.\n\nValid status transitions:\n- available -> booked (when order confirmed)\n- booked -> departed (when ship leaves)\n- departed -> arrived (when ship arrives at port)","operationId":"update_boat_status_api_boats__schedule_id__status_patch","parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleStatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BoatScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/order-builder":{"get":{"tags":["Order Builder"],"summary":"Get Order Builder","description":"Get Order Builder data.\n\nReturns everything needed for the Order Builder hero page:\n- Target boat information\n- Products grouped by priority (HIGH_PRIORITY, CONSIDER, WELL_COVERED, YOUR_CALL)\n- Pre-selected products based on mode\n- Order summary with capacity checks\n- Alerts for issues\n\nMode determines container target:\n- minimal: 3 containers (42 pallets) — only HIGH_PRIORITY\n- standard: 4 containers (56 pallets) — HIGH_PRIORITY + CONSIDER\n- optimal: 5 containers (70 pallets) — fill boat with WELL_COVERED","operationId":"get_order_builder_api_order_builder_get","parameters":[{"name":"boat_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Specific boat ID. If not provided, uses next available boat.","title":"Boat Id"},"description":"Specific boat ID. If not provided, uses next available boat."},{"name":"mode","in":"query","required":false,"schema":{"$ref":"#/components/schemas/OrderBuilderMode","description":"Optimization mode: minimal (3 cnt), standard (4 cnt), optimal (5 cnt)","default":"standard"},"description":"Optimization mode: minimal (3 cnt), standard (4 cnt), optimal (5 cnt)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderBuilderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/order-builder/confirm":{"post":{"tags":["Order Builder"],"summary":"Confirm Order","description":"Confirm order and create factory_order record.\n\nThis creates a persistent factory_order that can be:\n- Tracked through production (PENDING → CONFIRMED → READY → SHIPPED)\n- Linked to shipments later\n- Referenced by PV number\n\nRequest body:\n{\n    \"boat_id\": \"uuid\",\n    \"boat_name\": \"MSC Mediterranean\",\n    \"boat_departure\": \"2026-02-15\",\n    \"products\": [\n        {\"product_id\": \"uuid\", \"sku\": \"ALMENDRO BEIGE BTE\", \"pallets\": 14},\n        {\"product_id\": \"uuid\", \"sku\": \"CEIBA GRIS CLARO BTE\", \"pallets\": 7}\n    ],\n    \"pv_number\": \"PV-20260108-001\",  // Optional - auto-generated if not provided\n    \"notes\": \"Urgent order for February shipment\"\n}\n\nReturns: Created factory_order with PV number and details","operationId":"confirm_order_api_order_builder_confirm_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmOrderRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmOrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/order-builder/export":{"post":{"tags":["Order Builder"],"summary":"Export Order","description":"Generate Excel file for factory order.\n\nRequest body:\n{\n    \"products\": [\n        {\"sku\": \"ALMENDRO BEIGE BTE\", \"pallets\": 14},\n        {\"sku\": \"CEIBA GRIS CLARO BTE\", \"pallets\": 7}\n    ],\n    \"boat_departure\": \"2026-01-15\"\n}\n\nReturns: Excel file download","operationId":"export_order_api_order_builder_export_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExportOrderRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/factory-orders":{"get":{"tags":["Factory Orders"],"summary":"List Factory Orders","description":"List all factory orders with optional filters.\n\nReturns paginated list of factory orders.","operationId":"list_factory_orders_api_factory_orders_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/OrderStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive orders","default":false,"title":"Include Inactive"},"description":"Include inactive orders"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Factory Orders"],"summary":"Create Factory Order","description":"Create a new factory order with items.\n\nRaises:\n    409: PV number already exists\n    422: Validation error","operationId":"create_factory_order_api_factory_orders_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderWithItemsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/factory-orders/status/{status}":{"get":{"tags":["Factory Orders"],"summary":"Get Orders By Status","description":"Get all orders with a specific status.\n\nUseful for workflow views (e.g., all PENDING orders).","operationId":"get_orders_by_status_api_factory_orders_status__status__get","parameters":[{"name":"status","in":"path","required":true,"schema":{"$ref":"#/components/schemas/OrderStatus"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FactoryOrderResponse"},"title":"Response Get Orders By Status Api Factory Orders Status  Status  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/factory-orders/pv/{pv_number}":{"get":{"tags":["Factory Orders"],"summary":"Get Factory Order By Pv","description":"Get a factory order by PV number.\n\nRaises:\n    404: Order not found","operationId":"get_factory_order_by_pv_api_factory_orders_pv__pv_number__get","parameters":[{"name":"pv_number","in":"path","required":true,"schema":{"type":"string","title":"Pv Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderWithItemsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/factory-orders/{order_id}":{"get":{"tags":["Factory Orders"],"summary":"Get Factory Order","description":"Get a single factory order by ID.\n\nIncludes line items.\n\nRaises:\n    404: Order not found","operationId":"get_factory_order_api_factory_orders__order_id__get","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"string","title":"Order Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderWithItemsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Factory Orders"],"summary":"Update Factory Order","description":"Update an existing factory order.\n\nOnly provided fields are updated.\nUse PATCH /{id}/status to update status.\n\nRaises:\n    404: Order not found\n    409: New PV number already exists\n    422: Validation error","operationId":"update_factory_order_api_factory_orders__order_id__patch","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"string","title":"Order Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderWithItemsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Factory Orders"],"summary":"Delete Factory Order","description":"Delete a factory order (soft delete).\n\nSets active=False rather than removing from database.\n\nRaises:\n    404: Order not found","operationId":"delete_factory_order_api_factory_orders__order_id__delete","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"string","title":"Order Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/factory-orders/{order_id}/items":{"get":{"tags":["Factory Orders"],"summary":"Get Factory Order Items","description":"Get all line items for a factory order.\n\nRaises:\n    404: Order not found","operationId":"get_factory_order_items_api_factory_orders__order_id__items_get","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"string","title":"Order Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FactoryOrderItemResponse"},"title":"Response Get Factory Order Items Api Factory Orders  Order Id  Items Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/factory-orders/{order_id}/status":{"patch":{"tags":["Factory Orders"],"summary":"Update Factory Order Status","description":"Update factory order status.\n\nValidates status transitions:\n- Can skip forward (PENDING -> READY is OK)\n- Cannot go backward (READY -> CONFIRMED is NOT OK)\n- SHIPPED is terminal (cannot change from SHIPPED)\n\nRaises:\n    404: Order not found\n    422: Invalid status transition","operationId":"update_factory_order_status_api_factory_orders__order_id__status_patch","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"string","title":"Order Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderStatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FactoryOrderWithItemsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/factory-orders/count/total":{"get":{"tags":["Factory Orders"],"summary":"Count Factory Orders","description":"Get total factory order count.","operationId":"count_factory_orders_api_factory_orders_count_total_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/OrderStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive","default":false,"title":"Include Inactive"},"description":"Include inactive"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments":{"get":{"tags":["Shipments"],"summary":"List Shipments","description":"List all shipments with optional filters.\n\nReturns paginated list of shipments.","operationId":"list_shipments_api_shipments_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ShipmentStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"factory_order_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by factory order","title":"Factory Order Id"},"description":"Filter by factory order"},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive shipments","default":false,"title":"Include Inactive"},"description":"Include inactive shipments"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Shipments"],"summary":"Create Shipment","description":"Create a new shipment.\n\nRaises:\n    409: Booking number or SHP number already exists\n    422: Validation error","operationId":"create_shipment_api_shipments_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/status/{status}":{"get":{"tags":["Shipments"],"summary":"Get Shipments By Status","description":"Get all shipments with a specific status.\n\nUseful for workflow views (e.g., all IN_TRANSIT shipments).","operationId":"get_shipments_by_status_api_shipments_status__status__get","parameters":[{"name":"status","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ShipmentStatus"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ShipmentResponse"},"title":"Response Get Shipments By Status Api Shipments Status  Status  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/booking/{booking_number}":{"get":{"tags":["Shipments"],"summary":"Get Shipment By Booking","description":"Get a shipment by booking number.\n\nRaises:\n    404: Shipment not found","operationId":"get_shipment_by_booking_api_shipments_booking__booking_number__get","parameters":[{"name":"booking_number","in":"path","required":true,"schema":{"type":"string","title":"Booking Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/shp/{shp_number}":{"get":{"tags":["Shipments"],"summary":"Get Shipment By Shp","description":"Get a shipment by SHP number (TIBA reference).\n\nRaises:\n    404: Shipment not found","operationId":"get_shipment_by_shp_api_shipments_shp__shp_number__get","parameters":[{"name":"shp_number","in":"path","required":true,"schema":{"type":"string","title":"Shp Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/{shipment_id}":{"get":{"tags":["Shipments"],"summary":"Get Shipment","description":"Get a single shipment by ID.\n\nRaises:\n    404: Shipment not found","operationId":"get_shipment_api_shipments__shipment_id__get","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Shipments"],"summary":"Update Shipment","description":"Update an existing shipment.\n\nOnly provided fields are updated.\nUse PATCH /{id}/status to update status.\n\nRaises:\n    404: Shipment not found\n    409: New booking/SHP number already exists\n    422: Validation error","operationId":"update_shipment_api_shipments__shipment_id__patch","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Shipments"],"summary":"Delete Shipment","description":"Delete a shipment (soft delete).\n\nSets active=False rather than removing from database.\n\nRaises:\n    404: Shipment not found","operationId":"delete_shipment_api_shipments__shipment_id__delete","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/{shipment_id}/status":{"patch":{"tags":["Shipments"],"summary":"Update Shipment Status","description":"Update shipment status.\n\nValidates status transitions:\n- Can skip forward (AT_FACTORY -> IN_TRANSIT is OK)\n- Cannot go backward (IN_TRANSIT -> AT_ORIGIN_PORT is NOT OK)\n- DELIVERED is terminal (cannot change from DELIVERED)\n\nRaises:\n    404: Shipment not found\n    422: Invalid status transition","operationId":"update_shipment_status_api_shipments__shipment_id__status_patch","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentStatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/count/total":{"get":{"tags":["Shipments"],"summary":"Count Shipments","description":"Get total shipment count.","operationId":"count_shipments_api_shipments_count_total_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ShipmentStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive","default":false,"title":"Include Inactive"},"description":"Include inactive"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/{shipment_id}/events":{"get":{"tags":["shipment-events"],"summary":"Get Shipment Events","description":"Get all events for a shipment.\n\nReturns events ordered by occurred_at DESC (newest first).","operationId":"get_shipment_events_api_shipments__shipment_id__events_get","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentEventListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/{shipment_id}/events/latest":{"get":{"tags":["shipment-events"],"summary":"Get Latest Shipment Event","description":"Get the most recent event for a shipment.\n\nUseful for checking current status without loading full history.","operationId":"get_latest_shipment_event_api_shipments__shipment_id__events_latest_get","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShipmentEventResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/shipments/{shipment_id}/containers":{"get":{"tags":["containers"],"summary":"List all containers for a shipment","description":"Get all containers for a specific shipment.\n\nArgs:\n    shipment_id: Shipment UUID\n\nReturns:\n    List of containers with their totals","operationId":"list_containers_by_shipment_api_shipments__shipment_id__containers_get","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["containers"],"summary":"Create a new container","description":"Create a new container for a shipment.\n\nArgs:\n    shipment_id: Shipment UUID\n    data: Container creation data\n\nReturns:\n    Created container","operationId":"create_container_api_shipments__shipment_id__containers_post","parameters":[{"name":"shipment_id","in":"path","required":true,"schema":{"type":"string","title":"Shipment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/containers/{container_id}":{"get":{"tags":["containers"],"summary":"Get container with items","description":"Get a container by ID with all its items.\n\nArgs:\n    container_id: Container UUID\n\nReturns:\n    Container with all items","operationId":"get_container_api_containers__container_id__get","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerWithItemsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["containers"],"summary":"Update container","description":"Update container fields.\n\nArgs:\n    container_id: Container UUID\n    data: Fields to update\n\nReturns:\n    Updated container","operationId":"update_container_api_containers__container_id__patch","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["containers"],"summary":"Delete container","description":"Delete a container (CASCADE deletes all items).\n\nArgs:\n    container_id: Container UUID","operationId":"delete_container_api_containers__container_id__delete","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/containers/{container_id}/items":{"post":{"tags":["containers"],"summary":"Add item to container","description":"Add a product item to a container.\n\nArgs:\n    container_id: Container UUID\n    data: Item data (product_id, quantity, pallets, weight)\n\nReturns:\n    Created container item","operationId":"add_container_item_api_containers__container_id__items_post","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerItemCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/containers/{container_id}/items/{item_id}":{"patch":{"tags":["containers"],"summary":"Update container item","description":"Update a container item.\n\nArgs:\n    container_id: Container UUID (for URL consistency)\n    item_id: Container item UUID\n    data: Fields to update\n\nReturns:\n    Updated container item","operationId":"update_container_item_api_containers__container_id__items__item_id__patch","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerItemUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["containers"],"summary":"Delete container item","description":"Delete an item from a container.\n\nArgs:\n    container_id: Container UUID (for URL consistency)\n    item_id: Container item UUID","operationId":"delete_container_item_api_containers__container_id__items__item_id__delete","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","title":"Item Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/containers/{container_id}/recalculate":{"post":{"tags":["containers"],"summary":"Recalculate container totals","description":"Recalculate container totals from items.\n\nSums up all item quantities, pallets, and weights.\n\nArgs:\n    container_id: Container UUID\n\nReturns:\n    Updated container with recalculated totals","operationId":"recalculate_container_totals_api_containers__container_id__recalculate_post","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContainerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/containers/{container_id}/validate":{"get":{"tags":["containers"],"summary":"Validate container limits","description":"Validate container against soft limits.\n\nChecks:\n- Weight <= 28,000 kg\n- Pallets <= 14\n- Area <= 1,881 m²\n\nArgs:\n    container_id: Container UUID\n\nReturns:\n    Validation result with warnings if limits exceeded","operationId":"validate_container_limits_api_containers__container_id__validate_get","parameters":[{"name":"container_id","in":"path","required":true,"schema":{"type":"string","title":"Container Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/alerts":{"get":{"tags":["Alerts"],"summary":"List Alerts","description":"List alerts with optional filters.\n\nQuery parameters:\n- is_read: Filter by read/unread (true/false)\n- severity: Filter by severity (CRITICAL, WARNING, INFO)","operationId":"list_alerts_api_alerts_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"is_read","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by read status","title":"Is Read"},"description":"Filter by read status"},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/AlertSeverity"},{"type":"null"}],"description":"Filter by severity","title":"Severity"},"description":"Filter by severity"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/alerts/unread":{"get":{"tags":["Alerts"],"summary":"Get Unread Alerts","description":"Get all unread alerts.\n\nReturns unread alerts sorted by creation date (newest first).","operationId":"get_unread_alerts_api_alerts_unread_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AlertResponse"},"type":"array","title":"Response Get Unread Alerts Api Alerts Unread Get"}}}}}}},"/api/alerts/{alert_id}":{"get":{"tags":["Alerts"],"summary":"Get Alert","description":"Get a single alert by ID.\n\nArgs:\n    alert_id: Alert UUID","operationId":"get_alert_api_alerts__alert_id__get","parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","title":"Alert Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/alerts/{alert_id}/read":{"patch":{"tags":["Alerts"],"summary":"Mark Alert Read","description":"Mark an alert as read.\n\nArgs:\n    alert_id: Alert UUID","operationId":"mark_alert_read_api_alerts__alert_id__read_patch","parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","title":"Alert Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/alerts/{alert_id}/dismiss":{"patch":{"tags":["Alerts"],"summary":"Dismiss Alert","description":"Dismiss an alert (mark as read and hide).\n\nArgs:\n    alert_id: Alert UUID","operationId":"dismiss_alert_api_alerts__alert_id__dismiss_patch","parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","title":"Alert Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/alerts/generate/stockout":{"post":{"tags":["Alerts"],"summary":"Generate Stockout Alerts","description":"Generate stockout alerts for products running low.\n\nCreates alerts for:\n- Products with < 14 days stock (CRITICAL)\n- Products with < 30 days stock (WARNING)\n\nSends alerts to Telegram automatically.","operationId":"generate_stockout_alerts_api_alerts_generate_stockout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AlertResponse"},"type":"array","title":"Response Generate Stockout Alerts Api Alerts Generate Stockout Post"}}}}}}},"/api/alerts/generate/booking-deadline":{"post":{"tags":["Alerts"],"summary":"Generate Booking Deadline Alerts","description":"Generate alerts for upcoming boat booking deadlines.\n\nCreates alerts for boats with booking deadline in < 3 days (CRITICAL).\n\nSends alerts to Telegram automatically.","operationId":"generate_booking_deadline_alerts_api_alerts_generate_booking_deadline_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AlertResponse"},"type":"array","title":"Response Generate Booking Deadline Alerts Api Alerts Generate Booking Deadline Post"}}}}}}},"/api/alerts/test-telegram":{"post":{"tags":["Alerts"],"summary":"Test Telegram Connection","description":"Test Telegram bot connection.\n\nSends a test message to configured Telegram chat.\n\nReturns bot info and connection status.","operationId":"test_telegram_connection_api_alerts_test_telegram_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ActionType":{"type":"string","enum":["ORDER_NOW","ORDER_SOON","WELL_STOCKED","SKIP_ORDER","REVIEW"],"title":"ActionType","description":"Action types for recommendations (what to do with each product)."},"AlertListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/AlertResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["data","total","page","page_size","total_pages"],"title":"AlertListResponse","description":"Paginated list of alerts."},"AlertResponse":{"properties":{"id":{"type":"string","title":"Id"},"type":{"type":"string","title":"Type"},"severity":{"type":"string","title":"Severity"},"title":{"type":"string","title":"Title"},"message":{"type":"string","title":"Message"},"product_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Id"},"shipment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipment Id"},"is_read":{"type":"boolean","title":"Is Read"},"is_sent":{"type":"boolean","title":"Is Sent"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"product_sku":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Sku"},"shipment_booking_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipment Booking Number"}},"type":"object","required":["id","type","severity","title","message","is_read","is_sent","created_at"],"title":"AlertResponse","description":"Alert response model."},"AlertSeverity":{"type":"string","enum":["CRITICAL","WARNING","INFO"],"title":"AlertSeverity","description":"Alert severity levels."},"BoatScheduleCreate":{"properties":{"vessel_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Vessel Name","description":"Name of the vessel"},"shipping_line":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Shipping Line","description":"Shipping company (e.g., CMA CGM)"},"departure_date":{"type":"string","format":"date","title":"Departure Date","description":"Departure date from origin port"},"arrival_date":{"type":"string","format":"date","title":"Arrival Date","description":"Arrival date at destination port"},"transit_days":{"type":"integer","exclusiveMinimum":0.0,"title":"Transit Days","description":"Number of days in transit"},"origin_port":{"type":"string","maxLength":100,"title":"Origin Port","description":"Origin port name","default":"Cartagena"},"destination_port":{"type":"string","maxLength":100,"title":"Destination Port","description":"Destination port name","default":"Puerto Quetzal"},"route_type":{"anyOf":[{"$ref":"#/components/schemas/RouteType"},{"type":"null"}],"description":"Route type: direct or with_stops"},"source_file":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Source File","description":"Original filename from upload"}},"type":"object","required":["departure_date","arrival_date","transit_days"],"title":"BoatScheduleCreate","description":"Create a new boat schedule.\n\nRequired: departure_date, arrival_date, transit_days\nOptional: vessel_name, shipping_line, origin_port, destination_port, route_type"},"BoatScheduleListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/BoatScheduleResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["data","total","page","page_size","total_pages"],"title":"BoatScheduleListResponse","description":"List of boat schedules with pagination."},"BoatScheduleResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Boat schedule UUID"},"vessel_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vessel Name","description":"Vessel name"},"shipping_line":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Line","description":"Shipping company"},"departure_date":{"type":"string","format":"date","title":"Departure Date","description":"Departure date"},"arrival_date":{"type":"string","format":"date","title":"Arrival Date","description":"Arrival date"},"transit_days":{"type":"integer","title":"Transit Days","description":"Days in transit"},"origin_port":{"type":"string","title":"Origin Port","description":"Origin port"},"destination_port":{"type":"string","title":"Destination Port","description":"Destination port"},"route_type":{"anyOf":[{"$ref":"#/components/schemas/RouteType"},{"type":"null"}],"description":"Route type"},"booking_deadline":{"type":"string","format":"date","title":"Booking Deadline","description":"Last date to book"},"status":{"$ref":"#/components/schemas/BoatStatus","description":"Current status"},"source_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source File","description":"Source filename"},"days_until_departure":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Until Departure","description":"Days until departure"},"days_until_deadline":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days Until Deadline","description":"Days until booking deadline"}},"type":"object","required":["created_at","id","departure_date","arrival_date","transit_days","origin_port","destination_port","booking_deadline","status"],"title":"BoatScheduleResponse","description":"Boat schedule response with all fields.\n\nUsed for GET responses."},"BoatScheduleStatusUpdate":{"properties":{"status":{"$ref":"#/components/schemas/BoatStatus","description":"New status for the boat schedule"}},"type":"object","required":["status"],"title":"BoatScheduleStatusUpdate","description":"Update only the status of a boat schedule."},"BoatScheduleUpdate":{"properties":{"vessel_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Vessel Name","description":"Name of the vessel"},"shipping_line":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Shipping Line","description":"Shipping company"},"departure_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Departure Date","description":"Departure date"},"arrival_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Arrival Date","description":"Arrival date"},"transit_days":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Transit Days","description":"Days in transit"},"origin_port":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Origin Port","description":"Origin port"},"destination_port":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Destination Port","description":"Destination port"},"route_type":{"anyOf":[{"$ref":"#/components/schemas/RouteType"},{"type":"null"}],"description":"Route type"},"status":{"anyOf":[{"$ref":"#/components/schemas/BoatStatus"},{"type":"null"}],"description":"Schedule status"}},"type":"object","title":"BoatScheduleUpdate","description":"Update existing boat schedule.\n\nAll fields optional - only provided fields are updated."},"BoatStatus":{"type":"string","enum":["available","booked","departed","arrived"],"title":"BoatStatus","description":"Boat schedule status."},"BoatUploadResult":{"properties":{"imported":{"type":"integer","title":"Imported","description":"Number of new schedules imported"},"updated":{"type":"integer","title":"Updated","description":"Number of existing schedules updated"},"skipped":{"type":"integer","title":"Skipped","description":"Number of rows skipped","default":0},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"Error messages"}},"type":"object","required":["imported","updated"],"title":"BoatUploadResult","description":"Result of uploading a TIBA Excel file."},"Body_upload_boat_schedules_api_boats_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_boat_schedules_api_boats_upload_post"},"Body_upload_inventory_api_inventory_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_inventory_api_inventory_upload_post"},"Body_upload_sales_api_sales_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_sales_api_sales_upload_post"},"Category":{"type":"string","enum":["MADERAS","EXTERIORES","MARMOLIZADOS"],"title":"Category","description":"Product categories."},"ConfidenceLevel":{"type":"string","enum":["HIGH","MEDIUM","LOW"],"title":"ConfidenceLevel","description":"Confidence level for velocity estimates."},"ConfirmOrderProductItem":{"properties":{"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"sku":{"type":"string","title":"Sku","description":"Product SKU"},"pallets":{"type":"integer","exclusiveMinimum":0.0,"title":"Pallets","description":"Number of pallets to order"}},"type":"object","required":["product_id","sku","pallets"],"title":"ConfirmOrderProductItem","description":"Product item for order confirmation."},"ConfirmOrderRequest":{"properties":{"boat_id":{"type":"string","title":"Boat Id","description":"Boat schedule UUID"},"boat_name":{"type":"string","title":"Boat Name","description":"Boat name for notes"},"boat_departure":{"type":"string","format":"date","title":"Boat Departure","description":"Boat departure date"},"products":{"items":{"$ref":"#/components/schemas/ConfirmOrderProductItem"},"type":"array","minItems":1,"title":"Products","description":"Selected products with pallets"},"pv_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pv Number","description":"Optional PV number. Auto-generated if not provided."},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional order notes"}},"type":"object","required":["boat_id","boat_name","boat_departure","products"],"title":"ConfirmOrderRequest","description":"Request to confirm order and create factory_order."},"ConfirmOrderResponse":{"properties":{"factory_order_id":{"type":"string","title":"Factory Order Id","description":"Created factory order UUID"},"pv_number":{"type":"string","title":"Pv Number","description":"PV number (e.g., PV-20260108-001)"},"status":{"type":"string","title":"Status","description":"Order status (PENDING)"},"order_date":{"type":"string","format":"date","title":"Order Date","description":"Order date"},"items_count":{"type":"integer","title":"Items Count","description":"Number of line items"},"total_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total M2","description":"Total m² ordered"},"total_pallets":{"type":"integer","title":"Total Pallets","description":"Total pallets ordered"},"created_at":{"type":"string","title":"Created At","description":"Created timestamp"}},"type":"object","required":["factory_order_id","pv_number","status","order_date","items_count","total_m2","total_pallets","created_at"],"title":"ConfirmOrderResponse","description":"Response after confirming order."},"ContainerCreate":{"properties":{"shipment_id":{"type":"string","title":"Shipment Id","description":"Shipment UUID this container belongs to"},"container_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Container Number","description":"Container number (e.g., TCNU1234567)"},"seal_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Seal Number","description":"Seal number"},"trucking_company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trucking Company Id","description":"Trucking company UUID"},"total_pallets":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Total Pallets","description":"Total number of pallets"},"total_weight_kg":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total Weight Kg","description":"Total weight in kg"},"total_m2":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total M2","description":"Total area in m²"},"fill_percentage":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Fill Percentage","description":"Fill percentage (0-100)"},"unload_start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload Start","description":"Unload start time"},"unload_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload End","description":"Unload end time"}},"type":"object","required":["shipment_id"],"title":"ContainerCreate","description":"Create a new container.\n\nRequired: shipment_id\nOptional: All other fields"},"ContainerItemCreate":{"properties":{"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"quantity":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Quantity","description":"Quantity in m²"},"pallets":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Pallets","description":"Number of pallets"},"weight_kg":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Weight Kg","description":"Weight in kg"}},"type":"object","required":["product_id","quantity"],"title":"ContainerItemCreate","description":"Create a new container item.\n\nRequired: product_id, quantity\nOptional: pallets, weight_kg"},"ContainerItemResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Container item UUID"},"container_id":{"type":"string","title":"Container Id","description":"Container UUID"},"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"quantity":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Quantity","description":"Quantity in m²"},"pallets":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Pallets","description":"Number of pallets"},"weight_kg":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Weight Kg","description":"Weight in kg"}},"type":"object","required":["created_at","id","container_id","product_id","quantity"],"title":"ContainerItemResponse","description":"Container item response with all fields.\n\nUsed for GET responses."},"ContainerItemUpdate":{"properties":{"quantity":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Quantity"},"pallets":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Pallets"},"weight_kg":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Weight Kg"}},"type":"object","title":"ContainerItemUpdate","description":"Update container item.\n\nAll fields optional - only provided fields are updated."},"ContainerListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/ContainerResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["data","total"],"title":"ContainerListResponse","description":"List of containers."},"ContainerResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Container UUID"},"shipment_id":{"type":"string","title":"Shipment Id","description":"Shipment UUID"},"container_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Number","description":"Container number"},"seal_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Seal Number","description":"Seal number"},"trucking_company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trucking Company Id","description":"Trucking company UUID"},"total_pallets":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Pallets","description":"Total pallets"},"total_weight_kg":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total Weight Kg","description":"Total weight in kg"},"total_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total M2","description":"Total area in m²"},"fill_percentage":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Fill Percentage","description":"Fill percentage"},"unload_start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload Start","description":"Unload start"},"unload_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload End","description":"Unload end"}},"type":"object","required":["created_at","id","shipment_id"],"title":"ContainerResponse","description":"Container response with all fields.\n\nUsed for GET responses."},"ContainerUpdate":{"properties":{"container_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Container Number"},"seal_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Seal Number"},"trucking_company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trucking Company Id"},"total_pallets":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Total Pallets"},"total_weight_kg":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total Weight Kg"},"total_m2":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total M2"},"fill_percentage":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Fill Percentage"},"unload_start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload Start"},"unload_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload End"}},"type":"object","title":"ContainerUpdate","description":"Update container.\n\nAll fields optional - only provided fields are updated."},"ContainerWithItemsResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Container UUID"},"shipment_id":{"type":"string","title":"Shipment Id","description":"Shipment UUID"},"container_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Number","description":"Container number"},"seal_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Seal Number","description":"Seal number"},"trucking_company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trucking Company Id","description":"Trucking company UUID"},"total_pallets":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Pallets","description":"Total pallets"},"total_weight_kg":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total Weight Kg","description":"Total weight in kg"},"total_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total M2","description":"Total area in m²"},"fill_percentage":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Fill Percentage","description":"Fill percentage"},"unload_start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload Start","description":"Unload start"},"unload_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Unload End","description":"Unload end"},"items":{"items":{"$ref":"#/components/schemas/ContainerItemResponse"},"type":"array","title":"Items","description":"Container items"}},"type":"object","required":["created_at","id","shipment_id"],"title":"ContainerWithItemsResponse","description":"Container with nested items.\n\nUsed for detailed GET response."},"ExportOrderRequest":{"properties":{"products":{"items":{"$ref":"#/components/schemas/ExportProductItem"},"type":"array","title":"Products"},"boat_departure":{"type":"string","format":"date","title":"Boat Departure"}},"type":"object","required":["products","boat_departure"],"title":"ExportOrderRequest","description":"Request body for order export."},"ExportProductItem":{"properties":{"sku":{"type":"string","title":"Sku"},"pallets":{"type":"integer","title":"Pallets"}},"type":"object","required":["sku","pallets"],"title":"ExportProductItem","description":"Single product in export request."},"FactoryOrderCreate":{"properties":{"pv_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Pv Number","description":"Pedido de Ventas number (e.g., PV-00017759)"},"order_date":{"type":"string","format":"date","title":"Order Date","description":"Date order was placed"},"items":{"items":{"$ref":"#/components/schemas/FactoryOrderItemCreate"},"type":"array","minItems":1,"title":"Items","description":"Order line items"},"notes":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Notes","description":"Optional notes"}},"type":"object","required":["order_date","items"],"title":"FactoryOrderCreate","description":"Create a new factory order.\n\nRequired: order_date, items\nOptional: pv_number, notes"},"FactoryOrderItemCreate":{"properties":{"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"quantity_ordered":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Quantity Ordered","description":"Quantity ordered in m²"},"estimated_ready_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Estimated Ready Date","description":"Estimated date product will be ready"}},"type":"object","required":["product_id","quantity_ordered"],"title":"FactoryOrderItemCreate","description":"Create a factory order item."},"FactoryOrderItemResponse":{"properties":{"id":{"type":"string","title":"Id","description":"Item UUID"},"factory_order_id":{"type":"string","title":"Factory Order Id","description":"Parent order UUID"},"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"quantity_ordered":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Quantity Ordered","description":"Quantity ordered in m²"},"quantity_produced":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Quantity Produced","description":"Quantity produced so far","default":"0"},"estimated_ready_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Estimated Ready Date","description":"Estimated ready date"},"actual_ready_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Actual Ready Date","description":"Actual ready date"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Created timestamp"},"product_sku":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Sku","description":"Product SKU"}},"type":"object","required":["id","factory_order_id","product_id","quantity_ordered","created_at"],"title":"FactoryOrderItemResponse","description":"Factory order item response."},"FactoryOrderListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/FactoryOrderResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["data","total","page","page_size","total_pages"],"title":"FactoryOrderListResponse","description":"List of factory orders with pagination."},"FactoryOrderResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Order UUID"},"pv_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pv Number","description":"Pedido de Ventas number"},"order_date":{"type":"string","format":"date","title":"Order Date","description":"Order date"},"status":{"$ref":"#/components/schemas/OrderStatus","description":"Current status"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Notes"},"active":{"type":"boolean","title":"Active","description":"Whether order is active","default":true},"total_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total M2","description":"Total m² ordered"},"item_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Item Count","description":"Number of line items"}},"type":"object","required":["created_at","id","order_date","status"],"title":"FactoryOrderResponse","description":"Factory order response with all fields.\n\nUsed for GET responses."},"FactoryOrderStatusUpdate":{"properties":{"status":{"$ref":"#/components/schemas/OrderStatus","description":"New status"}},"type":"object","required":["status"],"title":"FactoryOrderStatusUpdate","description":"Update only the status of a factory order."},"FactoryOrderUpdate":{"properties":{"pv_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Pv Number","description":"Pedido de Ventas number"},"order_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Order Date","description":"Order date"},"status":{"anyOf":[{"$ref":"#/components/schemas/OrderStatus"},{"type":"null"}],"description":"Order status"},"notes":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Notes","description":"Notes"}},"type":"object","title":"FactoryOrderUpdate","description":"Update factory order.\n\nAll fields optional - only provided fields are updated.\nStatus can be updated here or via dedicated /status endpoint."},"FactoryOrderWithItemsResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Order UUID"},"pv_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pv Number","description":"Pedido de Ventas number"},"order_date":{"type":"string","format":"date","title":"Order Date","description":"Order date"},"status":{"$ref":"#/components/schemas/OrderStatus","description":"Current status"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Notes"},"active":{"type":"boolean","title":"Active","description":"Whether order is active","default":true},"total_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total M2","description":"Total m² ordered"},"item_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Item Count","description":"Number of line items"},"items":{"items":{"$ref":"#/components/schemas/FactoryOrderItemResponse"},"type":"array","title":"Items","description":"Order line items"}},"type":"object","required":["created_at","id","order_date","status"],"title":"FactoryOrderWithItemsResponse","description":"Factory order response with line items included."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InventoryCurrentResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/InventorySnapshotWithProduct"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"as_of":{"type":"string","format":"date","title":"As Of","description":"Most recent snapshot date in results"}},"type":"object","required":["data","total","as_of"],"title":"InventoryCurrentResponse","description":"Latest inventory per product for dashboard."},"InventoryListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/InventorySnapshotResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["data","total","page","page_size","total_pages"],"title":"InventoryListResponse","description":"List of inventory snapshots with pagination."},"InventorySnapshotCreate":{"properties":{"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"warehouse_qty":{"type":"number","minimum":0.0,"title":"Warehouse Qty","description":"Warehouse quantity in m²"},"in_transit_qty":{"type":"number","minimum":0.0,"title":"In Transit Qty","description":"In-transit quantity in m² (on boat)","default":0},"snapshot_date":{"type":"string","format":"date","title":"Snapshot Date","description":"Date of inventory count"},"notes":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Notes","description":"Optional notes"}},"type":"object","required":["product_id","warehouse_qty","snapshot_date"],"title":"InventorySnapshotCreate","description":"Create a new inventory snapshot.\n\nRequired: product_id, warehouse_qty, snapshot_date\nOptional: in_transit_qty, notes"},"InventorySnapshotResponse":{"properties":{"id":{"type":"string","title":"Id","description":"Snapshot UUID"},"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"warehouse_qty":{"type":"number","title":"Warehouse Qty","description":"Warehouse quantity in m²"},"in_transit_qty":{"type":"number","title":"In Transit Qty","description":"In-transit quantity in m²","default":0},"snapshot_date":{"type":"string","format":"date","title":"Snapshot Date","description":"Date of inventory count"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional notes"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Record creation timestamp"}},"type":"object","required":["id","product_id","warehouse_qty","snapshot_date","created_at"],"title":"InventorySnapshotResponse","description":"Inventory snapshot response with all fields.\n\nUsed for GET responses."},"InventorySnapshotUpdate":{"properties":{"warehouse_qty":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Warehouse Qty","description":"Warehouse quantity in m²"},"in_transit_qty":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"In Transit Qty","description":"In-transit quantity in m²"},"snapshot_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Snapshot Date","description":"Date of inventory count"},"notes":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Notes","description":"Optional notes"}},"type":"object","title":"InventorySnapshotUpdate","description":"Update existing inventory snapshot.\n\nAll fields optional - only provided fields are updated."},"InventorySnapshotWithProduct":{"properties":{"id":{"type":"string","title":"Id","description":"Snapshot UUID"},"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"warehouse_qty":{"type":"number","title":"Warehouse Qty","description":"Warehouse quantity in m²"},"in_transit_qty":{"type":"number","title":"In Transit Qty","description":"In-transit quantity in m²","default":0},"snapshot_date":{"type":"string","format":"date","title":"Snapshot Date","description":"Date of inventory count"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional notes"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Record creation timestamp"},"sku":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sku","description":"Product SKU"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"Product category"},"rotation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rotation","description":"Product rotation"}},"type":"object","required":["id","product_id","warehouse_qty","snapshot_date","created_at"],"title":"InventorySnapshotWithProduct","description":"Inventory snapshot with product details.\n\nExtended response for dashboard views."},"InventoryUploadResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"records_created":{"type":"integer","title":"Records Created"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","records_created","message"],"title":"InventoryUploadResponse","description":"Response from inventory upload."},"OrderBuilderAlert":{"properties":{"type":{"$ref":"#/components/schemas/OrderBuilderAlertType"},"icon":{"type":"string","title":"Icon","description":"Emoji icon for display"},"product_sku":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Sku"},"message":{"type":"string","title":"Message"}},"type":"object","required":["type","icon","message"],"title":"OrderBuilderAlert","description":"Alert/warning in Order Builder."},"OrderBuilderAlertType":{"type":"string","enum":["warning","blocked","suggestion"],"title":"OrderBuilderAlertType","description":"Alert severity types."},"OrderBuilderBoat":{"properties":{"boat_id":{"type":"string","title":"Boat Id"},"name":{"type":"string","title":"Name"},"departure_date":{"type":"string","format":"date","title":"Departure Date"},"arrival_date":{"type":"string","format":"date","title":"Arrival Date"},"days_until_departure":{"type":"integer","title":"Days Until Departure"},"booking_deadline":{"type":"string","format":"date","title":"Booking Deadline"},"days_until_deadline":{"type":"integer","title":"Days Until Deadline"},"max_containers":{"type":"integer","title":"Max Containers","description":"3-5, default 5","default":5}},"type":"object","required":["boat_id","name","departure_date","arrival_date","days_until_departure","booking_deadline","days_until_deadline"],"title":"OrderBuilderBoat","description":"Boat information for Order Builder."},"OrderBuilderMode":{"type":"string","enum":["minimal","standard","optimal"],"title":"OrderBuilderMode","description":"Order builder optimization modes."},"OrderBuilderProduct":{"properties":{"product_id":{"type":"string","title":"Product Id"},"sku":{"type":"string","title":"Sku"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"priority":{"type":"string","title":"Priority","description":"HIGH_PRIORITY, CONSIDER, WELL_COVERED, YOUR_CALL"},"action_type":{"type":"string","title":"Action Type","description":"ORDER_NOW, ORDER_SOON, WELL_STOCKED, etc."},"current_stock_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Current Stock M2","description":"Warehouse stock in m2"},"in_transit_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"In Transit M2","description":"In-transit stock in m2","default":"0"},"days_to_cover":{"type":"integer","title":"Days To Cover","description":"Days until next boat arrival"},"total_demand_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Demand M2","description":"Demand during coverage period"},"coverage_gap_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Coverage Gap M2","description":"Demand - available (positive = need)"},"coverage_gap_pallets":{"type":"integer","title":"Coverage Gap Pallets","description":"Gap converted to pallets"},"suggested_pallets":{"type":"integer","title":"Suggested Pallets","description":"System suggestion based on gap"},"confidence":{"type":"string","title":"Confidence","description":"HIGH, MEDIUM, LOW"},"confidence_reason":{"type":"string","title":"Confidence Reason","description":"Why this confidence level","default":""},"unique_customers":{"type":"integer","title":"Unique Customers","description":"Number of distinct customers","default":0},"top_customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Top Customer Name"},"top_customer_share":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Top Customer Share"},"factory_available":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Factory Available","description":"Pallets available at factory"},"factory_status":{"type":"string","title":"Factory Status","description":"available, partial, blocked, unknown","default":"unknown"},"is_selected":{"type":"boolean","title":"Is Selected","description":"Whether product is in order","default":false},"selected_pallets":{"type":"integer","title":"Selected Pallets","description":"Editable quantity","default":0}},"type":"object","required":["product_id","sku","priority","action_type","current_stock_m2","days_to_cover","total_demand_m2","coverage_gap_m2","coverage_gap_pallets","suggested_pallets","confidence"],"title":"OrderBuilderProduct","description":"Product in Order Builder with selection state."},"OrderBuilderResponse":{"properties":{"boat":{"$ref":"#/components/schemas/OrderBuilderBoat"},"next_boat":{"anyOf":[{"$ref":"#/components/schemas/OrderBuilderBoat"},{"type":"null"}]},"mode":{"$ref":"#/components/schemas/OrderBuilderMode"},"high_priority":{"items":{"$ref":"#/components/schemas/OrderBuilderProduct"},"type":"array","title":"High Priority"},"consider":{"items":{"$ref":"#/components/schemas/OrderBuilderProduct"},"type":"array","title":"Consider"},"well_covered":{"items":{"$ref":"#/components/schemas/OrderBuilderProduct"},"type":"array","title":"Well Covered"},"your_call":{"items":{"$ref":"#/components/schemas/OrderBuilderProduct"},"type":"array","title":"Your Call"},"summary":{"$ref":"#/components/schemas/OrderBuilderSummary"}},"type":"object","required":["boat","mode","summary"],"title":"OrderBuilderResponse","description":"Complete Order Builder API response."},"OrderBuilderSummary":{"properties":{"total_pallets":{"type":"integer","title":"Total Pallets","default":0},"total_containers":{"type":"integer","title":"Total Containers","default":0},"total_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total M2","default":"0"},"boat_max_containers":{"type":"integer","title":"Boat Max Containers","default":5},"boat_remaining_containers":{"type":"integer","title":"Boat Remaining Containers","default":5},"warehouse_current_pallets":{"type":"integer","title":"Warehouse Current Pallets","default":0},"warehouse_capacity":{"type":"integer","title":"Warehouse Capacity","default":740},"warehouse_after_delivery":{"type":"integer","title":"Warehouse After Delivery","default":0},"warehouse_utilization_after":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Warehouse Utilization After","description":"Percentage 0-100","default":"0"},"alerts":{"items":{"$ref":"#/components/schemas/OrderBuilderAlert"},"type":"array","title":"Alerts"}},"type":"object","title":"OrderBuilderSummary","description":"Summary of current order selection."},"OrderRecommendations":{"properties":{"warehouse_status":{"$ref":"#/components/schemas/WarehouseStatus"},"lead_time_days":{"type":"integer","title":"Lead Time Days"},"calculation_date":{"type":"string","format":"date","title":"Calculation Date"},"next_boat_arrival":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Next Boat Arrival"},"days_to_next_boat":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days To Next Boat"},"recommendations":{"items":{"$ref":"#/components/schemas/ProductRecommendation"},"type":"array","title":"Recommendations"},"total_recommended_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Recommended Pallets"},"total_recommended_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Recommended M2"},"total_coverage_gap_pallets":{"type":"integer","title":"Total Coverage Gap Pallets","default":0},"total_coverage_gap_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Coverage Gap M2","default":"0"},"warnings":{"items":{"$ref":"#/components/schemas/RecommendationWarning"},"type":"array","title":"Warnings"},"high_priority_count":{"type":"integer","title":"High Priority Count","default":0},"consider_count":{"type":"integer","title":"Consider Count","default":0},"well_covered_count":{"type":"integer","title":"Well Covered Count","default":0},"your_call_count":{"type":"integer","title":"Your Call Count","default":0},"order_now_count":{"type":"integer","title":"Order Now Count","default":0},"order_soon_count":{"type":"integer","title":"Order Soon Count","default":0},"well_stocked_count":{"type":"integer","title":"Well Stocked Count","default":0},"skip_order_count":{"type":"integer","title":"Skip Order Count","default":0},"review_count":{"type":"integer","title":"Review Count","default":0}},"type":"object","required":["warehouse_status","lead_time_days","calculation_date","recommendations","total_recommended_pallets","total_recommended_m2","warnings"],"title":"OrderRecommendations","description":"Complete order recommendations response."},"OrderStatus":{"type":"string","enum":["PENDING","CONFIRMED","IN_PRODUCTION","READY","SHIPPED"],"title":"OrderStatus","description":"Factory order status values."},"ProductAllocation":{"properties":{"product_id":{"type":"string","title":"Product Id"},"sku":{"type":"string","title":"Sku"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"rotation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rotation"},"daily_velocity":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Daily Velocity","description":"Average daily sales (m²)"},"weekly_velocity":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Weekly Velocity","description":"Average weekly sales (m²)"},"velocity_std_dev":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Velocity Std Dev","description":"Standard deviation of weekly sales"},"weeks_of_data":{"type":"integer","title":"Weeks Of Data","description":"Weeks of sales data used"},"base_stock_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Base Stock M2","description":"velocity × lead_time"},"safety_stock_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Safety Stock M2","description":"std_dev × Z × √lead_time"},"target_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Target M2","description":"base + safety stock"},"target_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Target Pallets","description":"target_m2 / 135"},"scaled_target_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Scaled Target M2"},"scaled_target_pallets":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Scaled Target Pallets"},"scale_factor":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Scale Factor"}},"type":"object","required":["product_id","sku","daily_velocity","weekly_velocity","velocity_std_dev","weeks_of_data","base_stock_m2","safety_stock_m2","target_m2","target_pallets"],"title":"ProductAllocation","description":"Warehouse allocation for a single product."},"ProductCreate":{"properties":{"sku":{"type":"string","maxLength":50,"minLength":1,"title":"Sku","description":"Product SKU (unique identifier)","examples":["NOGAL CAFÉ","CEIBA GRIS OSC"]},"category":{"$ref":"#/components/schemas/Category","description":"Product category"},"rotation":{"anyOf":[{"$ref":"#/components/schemas/Rotation"},{"type":"null"}],"description":"Sales velocity classification"}},"type":"object","required":["sku","category"],"title":"ProductCreate","description":"Create a new product.\n\nRequired: sku, category\nOptional: rotation"},"ProductListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/ProductResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["data","total","page","page_size","total_pages"],"title":"ProductListResponse","description":"List of products with pagination."},"ProductRecommendation":{"properties":{"product_id":{"type":"string","title":"Product Id"},"sku":{"type":"string","title":"Sku"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"rotation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rotation"},"target_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Target Pallets"},"target_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Target M2"},"warehouse_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Warehouse Pallets"},"warehouse_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Warehouse M2"},"in_transit_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"In Transit Pallets"},"in_transit_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"In Transit M2"},"current_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Current Pallets","description":"warehouse + in_transit"},"current_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Current M2"},"gap_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gap Pallets","description":"target - current (allocation gap)"},"gap_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Gap M2"},"days_to_cover":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days To Cover","description":"Days until next boat arrives"},"total_demand_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Total Demand M2","description":"Demand during coverage period"},"coverage_gap_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Coverage Gap M2","description":"Demand - available (positive = need to order)"},"coverage_gap_pallets":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Coverage Gap Pallets","description":"Pallets needed to cover until next boat"},"daily_velocity":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Daily Velocity"},"days_until_empty":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Days Until Empty"},"stockout_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Stockout Date"},"order_arrives_date":{"type":"string","format":"date","title":"Order Arrives Date","description":"today + lead_time"},"arrives_before_stockout":{"type":"boolean","title":"Arrives Before Stockout"},"confidence":{"$ref":"#/components/schemas/ConfidenceLevel","description":"Confidence in velocity estimate","default":"MEDIUM"},"confidence_reason":{"type":"string","title":"Confidence Reason","description":"Why this confidence level","default":""},"weeks_of_data":{"type":"integer","title":"Weeks Of Data","description":"Weeks of sales history used","default":0},"velocity_cv":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Velocity Cv","description":"Coefficient of variation (std_dev / avg)"},"unique_customers":{"type":"integer","title":"Unique Customers","description":"Number of distinct customers","default":0},"top_customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Top Customer Name","description":"Name of largest customer"},"top_customer_share":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Top Customer Share","description":"Top customer's share of sales (0-1)"},"recurring_customers":{"type":"integer","title":"Recurring Customers","description":"Customers with 2+ orders","default":0},"recurring_share":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Recurring Share","description":"Share of sales from recurring customers (0-1)"},"priority":{"$ref":"#/components/schemas/RecommendationPriority"},"action_type":{"$ref":"#/components/schemas/ActionType","description":"Action to take (ORDER_NOW, ORDER_SOON, etc.)"},"action":{"type":"string","title":"Action","description":"Human-readable action"},"reason":{"type":"string","title":"Reason","description":"Why this recommendation"}},"type":"object","required":["product_id","sku","target_pallets","target_m2","warehouse_pallets","warehouse_m2","in_transit_pallets","in_transit_m2","current_pallets","current_m2","gap_pallets","gap_m2","daily_velocity","order_arrives_date","arrives_before_stockout","priority","action_type","action","reason"],"title":"ProductRecommendation","description":"Order recommendation for a single product."},"ProductResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Product UUID"},"sku":{"type":"string","title":"Sku","description":"Product SKU"},"owner_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owner Code","description":"Owner's Excel SKU code (e.g., '0000102', '0000119')"},"category":{"$ref":"#/components/schemas/Category","description":"Product category"},"rotation":{"anyOf":[{"$ref":"#/components/schemas/Rotation"},{"type":"null"}],"description":"Sales velocity"},"active":{"type":"boolean","title":"Active","description":"Whether product is active"}},"type":"object","required":["created_at","id","sku","category","active"],"title":"ProductResponse","description":"Product response with all fields.\n\nUsed for GET responses."},"ProductStockout":{"properties":{"product_id":{"type":"string","title":"Product Id"},"sku":{"type":"string","title":"Sku"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"rotation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rotation"},"warehouse_qty":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Warehouse Qty"},"in_transit_qty":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"In Transit Qty"},"total_qty":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Qty"},"avg_daily_sales":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Avg Daily Sales"},"weekly_sales":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Weekly Sales"},"weeks_of_data":{"type":"integer","title":"Weeks Of Data"},"days_to_stockout":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Days To Stockout"},"stockout_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Stockout Date"},"status":{"$ref":"#/components/schemas/StockoutStatus"},"status_reason":{"type":"string","title":"Status Reason"}},"type":"object","required":["product_id","sku","warehouse_qty","in_transit_qty","total_qty","avg_daily_sales","weekly_sales","weeks_of_data","status","status_reason"],"title":"ProductStockout","description":"Stockout calculation result for a single product."},"ProductUpdate":{"properties":{"sku":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"Sku","description":"Product SKU"},"category":{"anyOf":[{"$ref":"#/components/schemas/Category"},{"type":"null"}],"description":"Product category"},"rotation":{"anyOf":[{"$ref":"#/components/schemas/Rotation"},{"type":"null"}],"description":"Sales velocity classification"},"active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Active","description":"Whether product is active"}},"type":"object","title":"ProductUpdate","description":"Update existing product.\n\nAll fields optional - only provided fields are updated."},"RecommendationPriority":{"type":"string","enum":["HIGH_PRIORITY","CONSIDER","WELL_COVERED","YOUR_CALL"],"title":"RecommendationPriority","description":"Priority levels based on boat arrival dates."},"RecommendationWarning":{"properties":{"product_id":{"type":"string","title":"Product Id"},"sku":{"type":"string","title":"Sku"},"type":{"$ref":"#/components/schemas/WarningType"},"action_type":{"$ref":"#/components/schemas/ActionType","description":"Action recommendation for this warning"},"message":{"type":"string","title":"Message"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"},"in_transit_m2":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"In Transit M2","description":"Stock currently in transit"},"in_transit_pallets":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"In Transit Pallets"}},"type":"object","required":["product_id","sku","type","action_type","message"],"title":"RecommendationWarning","description":"Warning for products that shouldn't be ordered."},"Rotation":{"type":"string","enum":["ALTA","MEDIA-ALTA","MEDIA","BAJA"],"title":"Rotation","description":"Product rotation/velocity classification."},"RouteType":{"type":"string","enum":["direct","with_stops"],"title":"RouteType","description":"Route type for boat schedules."},"SalesListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/SalesRecordResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["data","total","page","page_size","total_pages"],"title":"SalesListResponse","description":"Paginated sales list response."},"SalesRecordCreate":{"properties":{"product_id":{"type":"string","title":"Product Id","description":"Product UUID"},"week_start":{"type":"string","format":"date","title":"Week Start","description":"Start of the week (Monday)"},"quantity_m2":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Quantity M2","description":"Sales quantity in m²"},"customer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer","description":"Original customer name (with accents)"},"customer_normalized":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Normalized","description":"Normalized for grouping (uppercase ASCII)"}},"type":"object","required":["product_id","week_start","quantity_m2"],"title":"SalesRecordCreate","description":"Schema for creating a sales record."},"SalesRecordResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id"},"product_id":{"type":"string","title":"Product Id"},"week_start":{"type":"string","format":"date","title":"Week Start"},"quantity_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Quantity M2"},"customer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer"},"customer_normalized":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Normalized"}},"type":"object","required":["created_at","id","product_id","week_start","quantity_m2"],"title":"SalesRecordResponse","description":"Schema for sales record response."},"SalesRecordUpdate":{"properties":{"week_start":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Week Start"},"quantity_m2":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Quantity M2"}},"type":"object","title":"SalesRecordUpdate","description":"Schema for updating a sales record."},"SalesUploadResponse":{"properties":{"created":{"type":"integer","title":"Created"},"records":{"items":{"$ref":"#/components/schemas/SalesRecordResponse"},"type":"array","title":"Records"}},"type":"object","required":["created","records"],"title":"SalesUploadResponse","description":"Response from sales upload."},"SettingListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/SettingResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["data","total"],"title":"SettingListResponse","description":"List of settings."},"SettingResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Setting UUID"},"key":{"type":"string","title":"Key","description":"Setting key (unique)"},"value":{"type":"string","title":"Value","description":"Setting value"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Human-readable description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"Setting category for grouping"}},"type":"object","required":["created_at","id","key","value"],"title":"SettingResponse","description":"Setting response with all fields.\n\nUsed for GET responses."},"SettingUpdate":{"properties":{"value":{"type":"string","maxLength":500,"minLength":1,"title":"Value","description":"Setting value"}},"type":"object","required":["value"],"title":"SettingUpdate","description":"Update existing setting.\n\nOnly value can be updated - key is immutable."},"ShipmentCreate":{"properties":{"factory_order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Factory Order Id","description":"Factory order UUID this shipment is for"},"boat_schedule_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Boat Schedule Id","description":"Boat schedule UUID (planned vessel)"},"shipping_company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Company Id","description":"Shipping company UUID"},"origin_port_id":{"type":"string","title":"Origin Port Id","description":"Origin port UUID"},"destination_port_id":{"type":"string","title":"Destination Port Id","description":"Destination port UUID"},"booking_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Booking Number","description":"CMA CGM booking reference (e.g., BGA0505879)"},"shp_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Shp Number","description":"TIBA shipment reference (e.g., SHP0065011)"},"bill_of_lading":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Bill Of Lading","description":"Bill of lading number"},"vessel_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Vessel Name","description":"Vessel name"},"voyage_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Voyage Number","description":"Voyage number"},"etd":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Etd","description":"Estimated time of departure"},"eta":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Eta","description":"Estimated time of arrival"},"free_days":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Free Days","description":"Number of free days at destination"},"freight_cost_usd":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Freight Cost Usd","description":"Freight cost in USD"},"notes":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Notes","description":"Optional notes"}},"type":"object","required":["origin_port_id","destination_port_id"],"title":"ShipmentCreate","description":"Create a new shipment.\n\nRequired: origin_port_id, destination_port_id\nOptional: All other fields"},"ShipmentEventListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/ShipmentEventResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["data","total"],"title":"ShipmentEventListResponse","description":"List of shipment events."},"ShipmentEventResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Event UUID"},"shipment_id":{"type":"string","title":"Shipment Id","description":"Shipment UUID"},"status":{"$ref":"#/components/schemas/ShipmentStatus","description":"Shipment status at this event"},"occurred_at":{"type":"string","format":"date-time","title":"Occurred At","description":"When this status change occurred"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Notes about this event"}},"type":"object","required":["created_at","id","shipment_id","status","occurred_at"],"title":"ShipmentEventResponse","description":"Shipment event response with all fields.\n\nUsed for GET responses."},"ShipmentListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/ShipmentResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["data","total","page","page_size","total_pages"],"title":"ShipmentListResponse","description":"List of shipments with pagination."},"ShipmentResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"id":{"type":"string","title":"Id","description":"Shipment UUID"},"factory_order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Factory Order Id","description":"Factory order UUID"},"boat_schedule_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Boat Schedule Id","description":"Boat schedule UUID"},"shipping_company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Company Id","description":"Shipping company UUID"},"origin_port_id":{"type":"string","title":"Origin Port Id","description":"Origin port UUID"},"destination_port_id":{"type":"string","title":"Destination Port Id","description":"Destination port UUID"},"status":{"$ref":"#/components/schemas/ShipmentStatus","description":"Current status"},"active":{"type":"boolean","title":"Active","description":"Whether shipment is active","default":true},"booking_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Number","description":"CMA CGM booking reference"},"shp_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shp Number","description":"TIBA shipment reference"},"bill_of_lading":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bill Of Lading","description":"Bill of lading number"},"vessel_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vessel Name","description":"Vessel name"},"voyage_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voyage Number","description":"Voyage number"},"etd":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Etd","description":"Estimated time of departure"},"eta":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Eta","description":"Estimated time of arrival"},"actual_departure":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Actual Departure","description":"Actual departure date"},"actual_arrival":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Actual Arrival","description":"Actual arrival date"},"free_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Free Days","description":"Number of free days"},"free_days_expiry":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Free Days Expiry","description":"Free days expiry date"},"freight_cost_usd":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Freight Cost Usd","description":"Freight cost in USD"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Notes"}},"type":"object","required":["created_at","id","origin_port_id","destination_port_id","status"],"title":"ShipmentResponse","description":"Shipment response with all fields.\n\nUsed for GET responses."},"ShipmentStatus":{"type":"string","enum":["AT_FACTORY","AT_ORIGIN_PORT","IN_TRANSIT","AT_DESTINATION_PORT","IN_CUSTOMS","IN_TRUCK","DELIVERED"],"title":"ShipmentStatus","description":"Shipment status values."},"ShipmentStatusUpdate":{"properties":{"status":{"$ref":"#/components/schemas/ShipmentStatus","description":"New status"}},"type":"object","required":["status"],"title":"ShipmentStatusUpdate","description":"Update only the status of a shipment."},"ShipmentUpdate":{"properties":{"factory_order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Factory Order Id","description":"Factory order UUID"},"boat_schedule_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Boat Schedule Id","description":"Boat schedule UUID"},"shipping_company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Company Id","description":"Shipping company UUID"},"booking_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Booking Number","description":"CMA CGM booking reference"},"shp_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Shp Number","description":"TIBA shipment reference"},"bill_of_lading":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Bill Of Lading","description":"Bill of lading number"},"vessel_name":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Vessel Name","description":"Vessel name"},"voyage_number":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Voyage Number","description":"Voyage number"},"etd":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Etd","description":"Estimated time of departure"},"eta":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Eta","description":"Estimated time of arrival"},"actual_departure":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Actual Departure","description":"Actual departure date"},"actual_arrival":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Actual Arrival","description":"Actual arrival date"},"free_days":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Free Days","description":"Number of free days"},"free_days_expiry":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Free Days Expiry","description":"Free days expiry date"},"freight_cost_usd":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Freight Cost Usd","description":"Freight cost in USD"},"notes":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Notes","description":"Notes"}},"type":"object","title":"ShipmentUpdate","description":"Update shipment.\n\nAll fields optional - only provided fields are updated.\nStatus is updated via separate endpoint."},"StockoutStatus":{"type":"string","enum":["HIGH_PRIORITY","CONSIDER","WELL_COVERED","YOUR_CALL"],"title":"StockoutStatus","description":"Stockout status levels based on boat arrival dates."},"StockoutSummary":{"properties":{"total_products":{"type":"integer","title":"Total Products"},"high_priority_count":{"type":"integer","title":"High Priority Count","default":0},"consider_count":{"type":"integer","title":"Consider Count","default":0},"well_covered_count":{"type":"integer","title":"Well Covered Count","default":0},"your_call_count":{"type":"integer","title":"Your Call Count","default":0},"next_boat_departure":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Next Boat Departure"},"second_boat_departure":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Second Boat Departure"},"days_to_next_boat_departure":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days To Next Boat Departure"},"days_to_second_boat_departure":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days To Second Boat Departure"},"next_boat_arrival":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Next Boat Arrival"},"second_boat_arrival":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Second Boat Arrival"},"days_to_next_boat":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days To Next Boat"},"days_to_second_boat":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Days To Second Boat"},"products":{"items":{"$ref":"#/components/schemas/ProductStockout"},"type":"array","title":"Products"}},"type":"object","required":["total_products","products"],"title":"StockoutSummary","description":"Summary of stockout calculations across all products."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WarehouseStatus":{"properties":{"total_capacity_pallets":{"type":"integer","title":"Total Capacity Pallets","default":740},"total_capacity_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Capacity M2"},"total_allocated_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Allocated Pallets","description":"Sum of all target allocations"},"total_allocated_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Allocated M2"},"total_current_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Current Pallets","description":"Warehouse stock only"},"total_current_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Current M2"},"total_in_transit_pallets":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total In Transit Pallets","description":"Stock in transit","default":"0"},"total_in_transit_m2":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total In Transit M2","default":"0"},"utilization_percent":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Utilization Percent","description":"warehouse / capacity × 100"},"allocation_scaled":{"type":"boolean","title":"Allocation Scaled","description":"True if allocations were scaled down"},"scale_factor":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Scale Factor"}},"type":"object","required":["total_capacity_m2","total_allocated_pallets","total_allocated_m2","total_current_pallets","total_current_m2","utilization_percent","allocation_scaled"],"title":"WarehouseStatus","description":"Current warehouse utilization status."},"WarningType":{"type":"string","enum":["WELL_STOCKED","OVER_STOCKED","NO_SALES_DATA","LOW_VELOCITY"],"title":"WarningType","description":"Types of warnings in recommendations."}}}}